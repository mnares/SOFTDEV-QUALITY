!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){"use strict";function t(e,t,n,i){var o,r={raw:{}};i=i||{};for(o in i)i.hasOwnProperty(o)&&("classes"===e?(r.raw[i[o]]=t+"-"+i[o],r[i[o]]="."+t+"-"+i[o]):(r.raw[o]=i[o],r[o]=i[o]+"."+t));for(o in n)n.hasOwnProperty(o)&&("classes"===e?(r.raw[o]=n[o].replace(/{ns}/g,t),r[o]=n[o].replace(/{ns}/g,"."+t)):(r.raw[o]=n[o].replace(/.{ns}/g,""),r[o]=n[o].replace(/{ns}/g,t)));return r}function n(){var e,t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"},n=["transition","-webkit-transition"],i={transform:"transform",MozTransform:"-moz-transform",OTransform:"-o-transform",msTransform:"-ms-transform",webkitTransform:"-webkit-transform"},o="transitionend",r="",a="",s=document.createElement("div");for(e in t)if(t.hasOwnProperty(e)&&e in s.style){o=t[e],h.support.transition=!0;break}g.transitionEnd=o+".{ns}";for(e in n)if(n.hasOwnProperty(e)&&n[e]in s.style){r=n[e];break}h.transition=r;for(e in i)if(i.hasOwnProperty(e)&&i[e]in s.style){h.support.transform=!0,a=i[e];break}h.transform=a}function i(){h.windowWidth=h.$window.width(),h.windowHeight=h.$window.height(),v=f.startTimer(v,w,o)}function o(){for(var e in h.ResizeHandlers)h.ResizeHandlers.hasOwnProperty(e)&&h.ResizeHandlers[e].callback.call(window,h.windowWidth,h.windowHeight)}function r(){if(h.support.raf){h.window.requestAnimationFrame(r);for(var e in h.RAFHandlers)h.RAFHandlers.hasOwnProperty(e)&&h.RAFHandlers[e].callback.call(window)}}function a(e,t){return parseInt(e.priority)-parseInt(t.priority)}var s,u,l,d="undefined"!=typeof window?window:this,c=d.document,p=function(){this.Version="@version",this.Plugins={},this.DontConflict=!1,this.Conflicts={fn:{}},this.ResizeHandlers=[],this.RAFHandlers=[],this.window=d,this.$window=e(d),this.document=c,this.$document=e(c),this.$body=null,this.windowWidth=0,this.windowHeight=0,this.fallbackWidth=1024,this.fallbackHeight=768,this.userAgent=window.navigator.userAgent||window.navigator.vendor||window.opera,this.isFirefox=/Firefox/i.test(this.userAgent),this.isChrome=/Chrome/i.test(this.userAgent),this.isSafari=/Safari/i.test(this.userAgent)&&!this.isChrome,this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(this.userAgent),this.isIEMobile=/IEMobile/i.test(this.userAgent),this.isFirefoxMobile=this.isFirefox&&this.isMobile,this.transform=null,this.transition=null,this.support={file:!!(window.File&&window.FileList&&window.FileReader),history:!!(window.history&&window.history.pushState&&window.history.replaceState),matchMedia:!(!window.matchMedia&&!window.msMatchMedia),pointer:!!window.PointerEvent,raf:!(!window.requestAnimationFrame||!window.cancelAnimationFrame),touch:!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),transition:!1,transform:!1}},f={killEvent:function(e,t){try{e.preventDefault(),e.stopPropagation(),t&&e.stopImmediatePropagation()}catch(n){}},killGesture:function(e){try{e.preventDefault()}catch(t){}},lockViewport:function(t){b[t]=!0,e.isEmptyObject(b)||P||(s.length?s.attr("content",l):s=e("head").append('<meta name="viewport" content="'+l+'">'),h.$body.on(g.gestureChange,f.killGesture).on(g.gestureStart,f.killGesture).on(g.gestureEnd,f.killGesture),P=!0)},unlockViewport:function(t){"undefined"!==e.type(b[t])&&delete b[t],e.isEmptyObject(b)&&P&&(s.length&&(u?s.attr("content",u):s.remove()),h.$body.off(g.gestureChange).off(g.gestureStart).off(g.gestureEnd),P=!1)},startTimer:function(e,t,n,i){return f.clearTimer(e),i?setInterval(n,t):setTimeout(n,t)},clearTimer:function(e,t){e&&(t?clearInterval(e):clearTimeout(e),e=null)},sortAsc:function(e,t){return parseInt(e,10)-parseInt(t,10)},sortDesc:function(e,t){return parseInt(t,10)-parseInt(e,10)},decodeEntities:function(e){var t=h.document.createElement("textarea");return t.innerHTML=e,t.value},parseQueryString:function(e){for(var t={},n=e.slice(e.indexOf("?")+1).split("&"),i=0;i<n.length;i++){var o=n[i].split("=");t[o[0]]=o[1]}return t}},h=new p,y=e.Deferred(),m={base:"{ns}",element:"{ns}-element"},g={namespace:".{ns}",beforeUnload:"beforeunload.{ns}",blur:"blur.{ns}",change:"change.{ns}",click:"click.{ns}",dblClick:"dblclick.{ns}",drag:"drag.{ns}",dragEnd:"dragend.{ns}",dragEnter:"dragenter.{ns}",dragLeave:"dragleave.{ns}",dragOver:"dragover.{ns}",dragStart:"dragstart.{ns}",drop:"drop.{ns}",error:"error.{ns}",focus:"focus.{ns}",focusIn:"focusin.{ns}",focusOut:"focusout.{ns}",gestureChange:"gesturechange.{ns}",gestureStart:"gesturestart.{ns}",gestureEnd:"gestureend.{ns}",input:"input.{ns}",keyDown:"keydown.{ns}",keyPress:"keypress.{ns}",keyUp:"keyup.{ns}",load:"load.{ns}",mouseDown:"mousedown.{ns}",mouseEnter:"mouseenter.{ns}",mouseLeave:"mouseleave.{ns}",mouseMove:"mousemove.{ns}",mouseOut:"mouseout.{ns}",mouseOver:"mouseover.{ns}",mouseUp:"mouseup.{ns}",panStart:"panstart.{ns}",pan:"pan.{ns}",panEnd:"panend.{ns}",resize:"resize.{ns}",scaleStart:"scalestart.{ns}",scaleEnd:"scaleend.{ns}",scale:"scale.{ns}",scroll:"scroll.{ns}",select:"select.{ns}",swipe:"swipe.{ns}",touchCancel:"touchcancel.{ns}",touchEnd:"touchend.{ns}",touchLeave:"touchleave.{ns}",touchMove:"touchmove.{ns}",touchStart:"touchstart.{ns}"},v=null,w=20,b=[],P=!1;return p.prototype.NoConflict=function(){h.DontConflict=!0;for(var t in h.Plugins)h.Plugins.hasOwnProperty(t)&&(e[t]=h.Conflicts[t],e.fn[t]=h.Conflicts.fn[t])},p.prototype.Ready=function(e){"complete"===h.document.readyState||"loading"!==h.document.readyState&&!h.document.documentElement.doScroll?e():h.document.addEventListener("DOMContentLoaded",e)},p.prototype.Plugin=function(n,i){return h.Plugins[n]=function(n,i){function o(t){var o,r,a,u="object"===e.type(t),l=Array.prototype.slice.call(arguments,u?1:0),d=this,c=e();for(t=e.extend(!0,{},i.defaults||{},u?t:{}),r=0,a=d.length;r<a;r++)if(o=d.eq(r),!s(o)){i.guid++;var p="__"+i.guid,f=i.classes.raw.base+p,h=o.data(n+"-options"),m=e.extend(!0,{$el:o,guid:p,numGuid:i.guid,rawGuid:f,dotGuid:"."+f},t,"object"===e.type(h)?h:{});o.addClass(i.classes.raw.element).data(y,m),i.methods._construct.apply(o,[m].concat(l)),c=c.add(o)}for(r=0,a=c.length;r<a;r++)o=c.eq(r),i.methods._postConstruct.apply(o,[s(o)]);return d}function r(e){i.functions.iterate.apply(this,[i.methods._destruct].concat(Array.prototype.slice.call(arguments,1))),this.removeClass(i.classes.raw.element).removeData(y)}function s(e){return e.data(y)}function u(t){if(this instanceof e){var n=i.methods[t];if("object"===e.type(t)||!t)return o.apply(this,arguments);if(n&&0!==t.indexOf("_")){var r=[n].concat(Array.prototype.slice.call(arguments,1));return i.functions.iterate.apply(this,r)}return this}}function l(t){var n=i.utilities[t]||i.utilities._initialize||!1;if(n){var o=Array.prototype.slice.call(arguments,"object"===e.type(t)?0:1);return n.apply(window,o)}}function d(t){i.defaults=e.extend(!0,i.defaults,t||{})}function c(t){for(var n=this,i=Array.prototype.slice.call(arguments,1),o=0,r=n.length;o<r;o++){var a=n.eq(o),u=s(a)||{};"undefined"!==e.type(u.$el)&&t.apply(a,[u].concat(i))}return n}var p="fs-"+n,y="fs"+n.replace(/(^|\s)([a-z])/g,function(e,t,n){return t+n.toUpperCase()});return i.initialized=!1,i.priority=i.priority||10,i.classes=t("classes",p,m,i.classes),i.events=t("events",n,g,i.events),i.functions=e.extend({getData:s,iterate:c},f,i.functions),i.methods=e.extend(!0,{_construct:e.noop,_postConstruct:e.noop,_destruct:e.noop,_resize:!1,destroy:r},i.methods),i.utilities=e.extend(!0,{_initialize:!1,_delegate:!1,defaults:d},i.utilities),i.widget&&(h.Conflicts.fn[n]=e.fn[n],e.fn[y]=u,h.DontConflict||(e.fn[n]=e.fn[y])),h.Conflicts[n]=e[n],e[y]=i.utilities._delegate||l,h.DontConflict||(e[n]=e[y]),i.namespace=n,i.namespaceClean=y,i.guid=0,i.methods._resize&&(h.ResizeHandlers.push({namespace:n,priority:i.priority,callback:i.methods._resize}),h.ResizeHandlers.sort(a)),i.methods._raf&&(h.RAFHandlers.push({namespace:n,priority:i.priority,callback:i.methods._raf}),h.RAFHandlers.sort(a)),i}(n,i),h.Plugins[n]},h.$window.on("resize.fs",i),i(),r(),h.Ready(function(){h.$body=e("body"),e("html").addClass(h.support.touch?"touchevents":"no-touchevents"),s=e('meta[name="viewport"]'),u=!!s.length&&s.attr("content"),l="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0",y.resolve()}),g.clickTouchStart=g.click+" "+g.touchStart,n(),window.Formstone=h,h}),function(e){"function"==typeof define&&define.amd?define(["jquery","./core"],e):e(jQuery,Formstone)}(function(e,t){"use strict";function n(e,n){if(n){e.$target=this.find(e.target),e.$check=e.target?e.$target:this,e.callback=n,e.styles=s(e.$check),e.timer=null;var i=e.$check.css(t.transition+"-duration"),r=parseFloat(i);t.support.transition&&i&&r?this.on(d.transitionEnd,e,o):e.timer=c.startTimer(e.timer,50,function(){a(e)},!0)}}function i(e){c.clearTimer(e.timer,!0),this.off(d.namespace)}function o(t){t.stopPropagation(),t.preventDefault();var n=t.data,i=t.originalEvent,o=n.target?n.$target:n.$el;n.property&&i.propertyName!==n.property||!e(i.target).is(o)||r(n)}function r(e){e.always||e.$el[l.namespaceClean]("destroy"),e.callback.apply(e.$el)}function a(e){var t=s(e.$check);u(e.styles,t)||r(e),e.styles=t}function s(t){var n,i,o,r={};if(t instanceof e&&(t=t[0]),p.getComputedStyle){n=p.getComputedStyle(t,null);for(var a=0,s=n.length;a<s;a++)i=n[a],o=n.getPropertyValue(i),r[i]=o}else if(t.currentStyle){n=t.currentStyle;for(i in n)r[i]=n[i]}return r}function u(t,n){if(e.type(t)!==e.type(n))return!1;for(var i in t){if(!t.hasOwnProperty(i))return!1;if(!t.hasOwnProperty(i)||!n.hasOwnProperty(i)||t[i]!==n[i])return!1}return!0}var l=t.Plugin("transition",{widget:!0,defaults:{always:!1,property:null,target:null},methods:{_construct:n,_destruct:i,resolve:r}}),d=l.events,c=l.functions,p=t.window}),function(e){"function"==typeof define&&define.amd?define(["jquery","./core","./transition"],e):e(jQuery,Formstone)}(function(e,t){"use strict";function n(){o(),_.on("scroll",o)}function i(){R.iterate.call(j,P),R.iterate.call(H,T),R.iterate.call(H,C)}function o(){I=_.scrollTop()+t.windowHeight,I<0&&(I=0),R.iterate.call(H,C)}function r(){j=e(z.base),H=e(z.lazy),R.iterate.call(H,T)}function a(t){t.youTubeGuid=0,t.$container=e('<div class="'+E.container+'"></div>').appendTo(this),t.thisClasses=[E.base,t.customClass],t.visible=!0,t.lazy&&(t.visible=!1,t.thisClasses.push(E.lazy)),this.addClass(t.thisClasses.join(" ")),r(),t.lazy?(T(t),C(t)):u(t)}function s(e){e.$container.remove(),this.removeClass(e.thisClasses.join(" ")).off(S.namespace),r()}function u(e){if(e.visible){var t=e.source;e.source=null,l(e,t,!0)}}function l(t,n,i){if(n!==t.source&&t.visible){if(t.source=n,t.responsive=!1,t.isYouTube=!1,"object"===e.type(n)&&"string"===e.type(n.video)){var o=n.video.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i);o&&o.length>=1&&(t.isYouTube=!0,t.videoId=o[1])}var r=!t.isYouTube&&"object"===e.type(n)&&(n.hasOwnProperty("mp4")||n.hasOwnProperty("ogg")||n.hasOwnProperty("webm"));if(t.video=t.isYouTube||r,t.playing=!1,t.isYouTube)t.playerReady=!1,t.posterLoaded=!1,f(t,n,i);else if("object"===e.type(n)&&n.hasOwnProperty("poster"))p(t,n,i);else{var a=n;if("object"===e.type(n)){var s,u=[],l=[];for(s in n)n.hasOwnProperty(s)&&l.push(s);l.sort(R.sortAsc);for(s in l)l.hasOwnProperty(s)&&u.push({width:parseInt(l[s]),url:n[l[s]],mq:A.matchMedia("(min-width: "+parseInt(l[s])+"px)")});t.responsive=!0,t.sources=u,a=d(t)}c(t,a,!1,i)}}else t.$el.trigger(S.loaded)}function d(e){var n=e.source;if(e.responsive){n=e.sources[0].url;for(var i in e.sources)e.sources.hasOwnProperty(i)&&(t.support.matchMedia?e.sources[i].mq.matches&&(n=e.sources[i].url):e.sources[i].width<t.fallbackWidth&&(n=e.sources[i].url))}return n}function c(t,n,i,o){var r=[E.media,E.image,o!==!0?E.animated:""].join(" "),a=e('<div class="'+r+'" aria-hidden="true"><img alt="'+t.alt+'"></div>'),s=a.find("img"),u=n;s.one(S.load,function(){D&&a.addClass(E["native"]).css({backgroundImage:"url('"+u+"')"}),a.fsTransition({property:"opacity"},function(){i||h(t)}).css({opacity:1}),k(t),i&&!o||t.$el.trigger(S.loaded)}).one(S.error,t,y).attr("src",u),t.responsive&&a.addClass(E.responsive),t.$container.append(a),(s[0].complete||4===s[0].readyState)&&s.trigger(S.load),t.currentSource=u}function p(t,n,i){t.source&&t.source.poster&&(c(t,t.source.poster,!0,!0),i=!1);var o=[E.media,E.video,i!==!0?E.animated:""].join(" "),r='<div class="'+o+'" aria-hidden="true">';r+="<video playsinline",t.loop&&(r+=" loop"),t.mute&&(r+=" muted"),r+=">",t.source.webm&&(r+='<source src="'+t.source.webm+'" type="video/webm" />'),t.source.mp4&&(r+='<source src="'+t.source.mp4+'" type="video/mp4" />'),t.source.ogg&&(r+='<source src="'+t.source.ogg+'" type="video/ogg" />'),r+="</video>",r+="</div>";var a=e(r),s=a.find("video");s.one(S.loadedMetaData,function(e){a.fsTransition({property:"opacity"},function(){h(t)}).css({opacity:1}),k(t),t.$el.trigger(S.loaded),t.autoPlay&&v(t)}),t.$container.append(a)}function f(t,n,i){if(!t.videoId){var o=n.match(/^.*(?:youtu.be\/|v\/|e\/|u\/\w+\/|embed\/|v=)([^#\&\?]*).*/);t.videoId=o[1]}if(t.posterLoaded||(t.source.poster||(t.source.poster="//img.youtube.com/vi/"+t.videoId+"/0.jpg"),t.posterLoaded=!0,c(t,t.source.poster,!0,i),i=!1),e("script[src*='youtube.com/iframe_api']").length||e("head").append('<script src="//www.youtube.com/iframe_api"></script>'),F){var r=t.guid+"_"+t.youTubeGuid++,a=[E.media,E.embed,i!==!0?E.animated:""].join(" "),s='<div class="'+a+'" aria-hidden="true">';s+='<div id="'+r+'"></div>',s+="</div>";var u=e(s),l=e.extend(!0,{},{controls:0,rel:0,showinfo:0,wmode:"transparent",enablejsapi:1,version:3,playerapiid:r,loop:t.loop?1:0,autoplay:1,origin:A.location.protocol+"//"+A.location.host},t.youtubeOptions);l.autoplay=1,t.$container.append(u),t.player&&(t.oldPlayer=t.player,t.player=null),t.player=new A.YT.Player(r,{videoId:t.videoId,playerVars:l,events:{onReady:function(e){t.playerReady=!0,t.mute&&t.player.mute(),t.autoPlay||t.player.pauseVideo()},onStateChange:function(e){t.playing||e.data!==A.YT.PlayerState.PLAYING?t.loop&&t.playing&&e.data===A.YT.PlayerState.ENDED&&t.player.playVideo():(t.playing=!0,u.fsTransition({property:"opacity"},function(){h(t)}).css({opacity:1}),k(t),t.$el.trigger(S.loaded)),t.$el.find(z.embed).addClass(E.ready)},onPlaybackQualityChange:function(e){},onPlaybackRateChange:function(e){},onError:function(e){y({data:t})},onApiChange:function(e){}}}),k(t)}else M.push({data:t,source:n})}function h(e){var t=e.$container.find(z.media);t.length>=1&&(t.not(":last").remove(),e.oldPlayer=null)}function y(e){var t=e.data;t.$el.trigger(S.error)}function m(e){var t=e.$container.find(z.media);t.length>=1&&t.fsTransition({property:"opacity"},function(){t.remove(),delete e.source}).css({opacity:0})}function g(e){if(e.video&&e.playing){if(e.isYouTube)e.playerReady?e.player.pauseVideo():e.autoPlay=!1;else{var t=e.$container.find("video");t.length&&t[0].pause()}e.playing=!1}}function v(e){if(e.video&&!e.playing)if(e.isYouTube)e.playerReady?e.player.playVideo():e.autoPlay=!0;else{var t=e.$container.find("video");t.length&&t[0].play(),e.playing=!0}}function w(e){if(e.video)if(e.isYouTube&&e.playerReady)e.player.mute();else{var t=e.$container.find("video");t.length&&(t[0].muted=!0)}e.mute=!0}function b(e){if(e.video){if(e.isYouTube&&e.playerReady)e.player.unMute();else{var t=e.$container.find("video");t.length&&(t[0].muted=!1)}e.playing=!0}e.mute=!1}function P(e){if(e.visible)if(e.responsive){var t=d(e);t!==e.currentSource?c(e,t,!1,!0):k(e)}else k(e)}function k(e){for(var t=e.$container.find(z.media),n=0,i=t.length;n<i;n++){var o=t.eq(n),r=e.isYouTube?"iframe":o.find("video").length?"video":"img",a=o.find(r);if(a.length&&("img"!==r||!D)){var s=e.$el.outerWidth(),u=e.$el.outerHeight(),l=$(e,a);e.width=l.width,e.height=l.height,e.left=0,e.top=0;var d=e.isYouTube?e.embedRatio:e.width/e.height;e.height=u,e.width=e.height*d,e.width<s&&(e.width=s,e.height=e.width/d),e.left=-(e.width-s)/2,e.top=-(e.height-u)/2,o.css({height:e.height,width:e.width,left:e.left,top:e.top})}}}function T(e){e.scrollTop=e.$el.offset().top}function C(e){!e.visible&&e.scrollTop<I+e.lazyEdge&&(e.visible=!0,u(e))}function $(t,n){if(t.isYouTube)return{height:500,width:500/t.embedRatio};if(n.is("img")){var i=n[0];if("undefined"!==e.type(i.naturalHeight))return{height:i.naturalHeight,width:i.naturalWidth};var o=new Image;return o.src=i.src,{height:o.height,width:o.width}}return{height:n[0].videoHeight,width:n[0].videoWidth}}var O=t.Plugin("background",{widget:!0,defaults:{alt:"",autoPlay:!0,customClass:"",embedRatio:1.777777,lazy:!1,lazyEdge:100,loop:!0,mute:!0,source:null,youtubeOptions:{}},classes:["container","media","animated","responsive","native","fixed","ready","lazy"],events:{loaded:"loaded",ready:"ready",loadedMetaData:"loadedmetadata"},methods:{_construct:a,_destruct:s,_resize:i,play:v,pause:g,mute:w,unmute:b,resize:k,load:l,unload:m}}),z=O.classes,E=z.raw,S=O.events,R=O.functions,A=t.window,_=t.$window,I=0,j=[],H=[],D="backgroundSize"in t.document.documentElement.style,F=!1,M=[];t.Ready(n),A.onYouTubeIframeAPIReady=function(){F=!0;for(var e in M)M.hasOwnProperty(e)&&f(M[e].data,M[e].source);M=[]}});